<!-- Search -->
<div class="d-flex justify-content-between align-items-center mb-3">
  <div></div>
  <div class="input-group w-25">
    <span class="input-group-text" id="search-addon">
      <i class="fas fa-search"></i>
    </span>
    <input
      type="text"
      class="form-control"
      placeholder="Search..."
      aria-label="Search"
      aria-describedby="search-addon"
      (keyup)="onSearch($event)"
    />
  </div>
</div>

<!-- Table -->
<div class="table-responsive">
  <table class="table table-bordered table-striped table-hover table-sm">
    <thead class="table-light">
      <tr>
        <th [width]="10">
          <input type="checkbox" [checked]="isAllSelected" (change)="toggleSelectAll()" />
        </th>
        <th [width]="50" *ngIf="buttonShow.edit || buttonShow.viewDetails || buttonShow.delete || buttonShow.print">
          <span>Action</span>
        </th>
        <th style="cursor: pointer" [width]="10">
          <div class="d-flex justify-content-between align-items-center">
            <span>#</span>
          </div>
        </th>
        <ng-container *ngFor="let column of columns">
          <th [style.width.px]="column.width" (click)="sortTable(column.key)" *ngIf="column.isShow !== false">
            {{ column.caption }}
            <i
              class="fas"
              [ngClass]="{
                'fa-sort-up': sortColumn === column.key && sortDirection === 'asc',
                'fa-sort-down': sortColumn === column.key && sortDirection === 'desc',
                'fa-sort': sortColumn !== column.key
              }"
            ></i>
          </th>
        </ng-container>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of paginatedData; let i = index">
        <td>
          <input type="checkbox" [checked]="selectedItems.has(row)" (change)="toggleUserSelection(row)" />
        </td>
        <td *ngIf="buttonShow.edit || buttonShow.viewDetails || buttonShow.delete || buttonShow.print">
          <div class="btn-group" role="group">
            <span *ngIf="buttonShow.edit" (click)="buttonShow.edit?.emit(row)" class="text-primary myPointer mx-1"><i class="fas fa-edit"></i></span>
            <span *ngIf="buttonShow.viewDetails" (click)="buttonShow.viewDetails?.emit(row)" class="text-info myPointer mx-1"><i class="fas fa-info-circle"></i></span>
            <span *ngIf="buttonShow.delete" (click)="buttonShow.delete?.emit(row)" class="text-danger myPointer mx-1"><i class="fas fa-trash"></i></span>
            <span *ngIf="buttonShow.print" (click)="buttonShow.print?.emit(row)" class="text-secondary myPointer mx-1"><i class="fas fa-print"></i></span>
            <!-- <button *ngIf="buttonShow.edit" (click)="buttonShow.edit?.emit(row)" class="btn btn-sm btn-primary">
              <i class="fas fa-edit"></i>
            </button> -->
            <!-- <button *ngIf="buttonShow.viewDetails" (click)="buttonShow.viewDetails?.emit(row)" class="btn btn-sm btn-info">
              <i class="fas fa-info-circle"></i>
            </button>
            <button *ngIf="buttonShow.delete" (click)="buttonShow.delete?.emit(row)" class="btn btn-sm btn-danger">
              <i class="fas fa-trash"></i>
            </button>
            <button *ngIf="buttonShow.print" (click)="buttonShow.print?.emit(row)" class="btn btn-sm btn-secondary">
              <i class="fas fa-print"></i>
            </button> -->
          </div>
        </td>
        <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
        <ng-container *ngFor="let column of columns">
          <td *ngIf="column.isShow !== false">
            {{ row[column.key] }}
          </td>
        </ng-container>
      </tr>
      <tr *ngIf="paginatedData.length === 0">
        <td
          [attr.colspan]="columns.length + (buttonShow.edit || buttonShow.viewDetails || buttonShow.delete || buttonShow.print ? 3 : 2)"
          class="text-center"
        >
          No data available.
        </td>
      </tr>
    </tbody>
  </table>
</div>

<div class="d-flex justify-content-between align-items-center mt-3">
  <div class="d-flex align-items-center">
    <label for="pageSize">Page Size:</label>
    <select id="pageSize" class="form-select d-inline w-auto" (change)="changePageSize($event)" [value]="pageSize">
      <option *ngFor="let size of pageSizes" [value]="size">{{ size }}</option>
    </select>
  </div>
  <div class="d-flex align-items-center">
    <div class="text-muted me-2">
      <span>Showing {{ startItem }} to {{ endItem }} of {{ totalItems }} entries</span>
    </div>
    <nav>
      <ul class="pagination mb-0">
        <li class="page-item">
          <a class="page-link" (click)="previousPage()" [class.disabled]="currentPage === 1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" color="#5FA9FF" fill="none">
              <path
                d="M11.5 18C11.5 18 5.50001 13.5811 5.5 12C5.49999 10.4188 11.5 6 11.5 6"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
              <path
                d="M18.5 18C18.5 18 12.5 13.5811 12.5 12C12.5 10.4188 18.5 6 18.5 6"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
            </svg>
          </a>
        </li>
        <li class="page-item" *ngFor="let page of pages">
          <a class="page-link" (click)="page !== '...' ? goToPage(page) : null" [class.active]="currentPage === page">{{ page }}</a>
        </li>
        <li class="page-item">
          <a class="page-link" (click)="nextPage()" [class.disabled]="currentPage === totalPages">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" color="#5FA9FF" fill="none">
              <path
                d="M12.5 18C12.5 18 18.5 13.5811 18.5 12C18.5 10.4188 12.5 6 12.5 6"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
              <path
                d="M5.50005 18C5.50005 18 11.5 13.5811 11.5 12C11.5 10.4188 5.5 6 5.5 6"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
            </svg>
          </a>
        </li>
      </ul>
    </nav>
  </div>
</div>
